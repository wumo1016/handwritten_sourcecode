{"version":3,"file":"single-spa.js","sources":["../../src/start.js","../../src/navigations/reroute.js","../../src/applications/app.js"],"sourcesContent":["import { reroute } from './navigations/reroute'\r\n\r\nexport let started = false\r\n/**\r\n * @Descripttion: 挂载应用\r\n * @param {*}\r\n */\r\nexport function start() {\r\n  started = true\r\n  // 加载并挂载应用\r\n  reroute()\r\n}\r\n","import { started } from '../start'\r\n\r\n/**\r\n * @Author: wyb\r\n * @Descripttion:\r\n * @param {*}\r\n */\r\nexport function reroute() {\r\n  // 获取需要加载的应用\r\n  // 获取需要被挂载的应用\r\n  // 获取需要卸载的应用\r\n\r\n  if (started) {\r\n    // 调用start\r\n    return performAppChanges()\r\n  } else {\r\n    // 调用register\r\n    // 注册应用时 需要预先加载\r\n    return loadApps()\r\n  }\r\n}\r\n\r\n/**\r\n * @Descripttion: 根据路径来装载\r\n * @param {*}\r\n */\r\nasync function performAppChanges() {}\r\n\r\n/**\r\n * @Descripttion: 预加载应用\r\n * @param {*}\r\n */\r\nasync function loadApps() {}\r\n","import { reroute } from '../navigations/reroute'\r\nimport {\r\n  BOOTSTRAPPING,\r\n  LOADING_SOURCE_CODE,\r\n  MOUNTED,\r\n  NOT_BOOTSTRAPPED,\r\n  NOT_LOADED,\r\n  NOT_MOUNTED,\r\n  shouldBeActive\r\n} from './app-helpers'\r\n\r\nconst apps = []\r\n\r\n/**\r\n * @Descripttion: 注册应用\r\n * @param {*} appName 应用名\r\n * @param {*} loadApp 加载应用的方法\r\n * @param {*} activeWhen 何时调用 loadApp 方法\r\n * @param {*} customProps 自定义属性\r\n */\r\nexport function registerApplication(appName, loadApp, activeWhen, customProps) {\r\n  apps.push({\r\n    name: appName,\r\n    loadApp,\r\n    activeWhen,\r\n    customProps,\r\n    status: NOT_LOADED\r\n  })\r\n\r\n  reroute() // 加载应用\r\n\r\n  // console.log(apps)\r\n}\r\n\r\n/**\r\n * @Descripttion:\r\n * @param {*}\r\n */\r\nexport function getAppChanges() {\r\n  const appsToUnmount = [] // 需要卸载的app\r\n  const appsToLoad = [] // 需要加载的app\r\n  const appsToMount = [] // 需要挂载的app\r\n\r\n  apps.forEach(app => {\r\n    const appShouldBeActive = shouldBeActive() // 是否需要挂载\r\n    switch (app.status) {\r\n      case NOT_LOADED:\r\n      case LOADING_SOURCE_CODE:\r\n        if (appShouldBeActive) appsToLoad.push(app)\r\n        break\r\n      case NOT_BOOTSTRAPPED:\r\n      case BOOTSTRAPPING:\r\n      case NOT_MOUNTED:\r\n        if (appShouldBeActive) appsToLoad.push(app)\r\n        break\r\n      case MOUNTED:\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;;;EAEO,IAAI,OAAO,GAAG,MAAK;EAC1B;EACA;EACA;EACA;EACO,SAAS,KAAK,GAAG;EACxB,EAAE,OAAO,GAAG,KAAI;EAChB;EACA,EAAE,OAAO,GAAE;EACX;;ECTA;EACA;EACA;EACA;EACA;EACO,SAAS,OAAO,GAAG;EAC1B;EACA;EACA;AACA;EACA,EAAE,IAAI,OAAO,EAAE;EACf;EACA,IAAI,OAAO,iBAAiB,EAAE;EAC9B,GAAG,MAAM;EACT;EACA;EACA,IAAI,OAAO,QAAQ,EAAE;EACrB,GAAG;EACH,CAAC;AACD;EACA;EACA;EACA;EACA;EACA,eAAe,iBAAiB,GAAG,EAAE;AACrC;EACA;EACA;EACA;EACA;EACA,eAAe,QAAQ,GAAG;;ECnB1B;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAAS,mBAAmB,CAAC,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE;AAQ/E;EACA,EAAE,OAAO,GAAE;AACX;EACA;EACA;;;;;;;;;;;"}